<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Display Marginal Effects of Predictors — marginal_effects.brmsfit • brms</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Display Marginal Effects of Predictors — marginal_effects.brmsfit" />

<meta property="og:description" content="Display marginal effects of one or more numeric and/or categorical 
predictors including two-way interaction effects." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brms</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://mc-stan.org/rstan">rstan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="http://mc-stan.org/bayesplot">bayesplot</a>
    </li>
    <li>
      <a href="http://mc-stan.org/shinystan">shinystan</a>
    </li>
    <li>
      <a href="http://mc-stan.org/loo">loo</a>
    </li>
    <li>
      <a href="http://mc-stan.org/projpred">projpred</a>
    </li>
    <li>
      <a href="http://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://mc-stan.org">Stan</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/mcmc_stan">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/paul-buerkner/brms">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="http://discourse.mc-stan.org/">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Display Marginal Effects of Predictors</h1>
    <small class="dont-index">Source: <a href='https://github.com/paul-buerkner/brms/blob/master/R/brmsfit-methods.R'><code>R/brmsfit-methods.R</code></a>, <a href='https://github.com/paul-buerkner/brms/blob/master/R/marginal_effects-helpers.R'><code>R/marginal_effects-helpers.R</code></a></small>
    <div class="hidden name"><code>marginal_effects.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Display marginal effects of one or more numeric and/or categorical 
predictors including two-way interaction effects.</p>
    
    </div>

    <pre class="usage"><span class='co'># S3 method for brmsfit</span>
<span class='fu'>marginal_effects</span>(<span class='no'>x</span>, <span class='kw'>effects</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>conditions</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>int_conditions</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>re_formula</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>robust</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>probs</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.025</span>, <span class='fl'>0.975</span>), <span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"fitted"</span>,
  <span class='st'>"predict"</span>), <span class='kw'>spaghetti</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>surface</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>categorical</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>ordinal</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>transform</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>resolution</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>select_points</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>too_far</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='no'>...</span>)

<span class='fu'>marginal_effects</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for brmsMarginalEffects</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>x</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>points</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>rug</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>mean</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>jitter_width</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>stype</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"contour"</span>,
  <span class='st'>"raster"</span>), <span class='kw'>line_args</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(), <span class='kw'>cat_args</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(),
  <span class='kw'>errorbar_args</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(), <span class='kw'>surface_args</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(),
  <span class='kw'>spaghetti_args</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(), <span class='kw'>point_args</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(), <span class='kw'>rug_args</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(),
  <span class='kw'>theme</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>ask</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>An <span style="R">R</span> object usually of class <code>brmsfit</code>.</p></td>
    </tr>
    <tr>
      <th>effects</th>
      <td><p>An optional character vector naming effects
(main effects or interactions) for which to compute marginal plots.
Interactions are specified by a <code>:</code> between variable names.
If <code>NULL</code> (the default), plots are generated for all main effects
and two-way interactions estimated in the model. When specifying
<code>effects</code> manually, <em>all</em> two-way interactions may be plotted
even if not originally modeled.</p></td>
    </tr>
    <tr>
      <th>conditions</th>
      <td><p>An optional <code>data.frame</code> containing variable values
to condition on. Each effect defined in <code>effects</code> will
be plotted separately for each row of <code>conditions</code>. Values in the 
<code>cond__</code> column will be used as titles of the subplots. If <code>cond__</code> 
is not given, the row names will be used for this purpose instead.
It is recommended to only define a few rows in order to keep the plots clear.
See <code><a href='make_conditions.html'>make_conditions</a></code> for an easy way to define conditions.
If <code>NULL</code> (the default), numeric variables will be marginalized
by using their means and factors will get their reference level assigned.</p></td>
    </tr>
    <tr>
      <th>int_conditions</th>
      <td><p>An optional named <code>list</code> whose elements are numeric
vectors of values of the second variables in two-way interactions. 
At these values, predictions are evaluated. The names of 
<code>int_conditions</code> have to match the variable names exactly.
Additionally, the elements of the numeric vectors may be named themselves,
in which case their names appear as labels for the conditions in the plots.
Instead of vectors, functions returning vectors may be passed and are
applied on the original values of the corresponding variable.
If <code>NULL</code> (the default), predictions are evaluated at the 
\(mean\) and at \(mean +/- sd\).</p></td>
    </tr>
    <tr>
      <th>re_formula</th>
      <td><p>A formula containing random effects to be considered 
in the marginal predictions. If <code>NULL</code>, include all random effects; 
if <code>NA</code> (default), include no random effects.</p></td>
    </tr>
    <tr>
      <th>robust</th>
      <td><p>If <code>TRUE</code> (the default) the median is used as the 
measure of central tendency. If <code>FALSE</code> the mean is used instead.</p></td>
    </tr>
    <tr>
      <th>probs</th>
      <td><p>The quantiles to be used in the computation of credible
intervals (defaults to 2.5 and 97.5 percent quantiles)</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Either <code>"fitted"</code> or <code>"predict"</code>. 
If <code>"fitted"</code>, plot marginal predictions of the regression curve. 
If <code>"predict"</code>, plot marginal predictions of the responses.</p></td>
    </tr>
    <tr>
      <th>spaghetti</th>
      <td><p>Logical. Indicates if predictions should
be visualized via spaghetti plots. Only applied for numeric
predictors. If <code>TRUE</code>, it is recommended 
to set argument <code>nsamples</code> to a relatively small value 
(e.g. <code>100</code>) in order to reduce computation time.</p></td>
    </tr>
    <tr>
      <th>surface</th>
      <td><p>Logical. Indicates if interactions or 
two-dimensional smooths should be visualized as a surface. 
Defaults to <code>FALSE</code>. The surface type can be controlled 
via argument <code>stype</code> of the related plotting method.</p></td>
    </tr>
    <tr>
      <th>categorical</th>
      <td><p>Logical. Indicates if effects of categorical 
or ordinal models should be shown in terms of probabilities
of response categories. Defaults to <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>ordinal</th>
      <td><p>Deprecated! Please use argument <code>categorical</code>.
Logical. Indicates if effects in ordinal models
should be visualized as a raster with the response categories
on the y-axis. Defaults to <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>transform</th>
      <td><p>A function or a character string naming 
a function to be applied on the predicted responses
before summary statistics are computed. Only allowed
if <code>method = "predict"</code>.</p></td>
    </tr>
    <tr>
      <th>resolution</th>
      <td><p>Number of support points used to generate 
the plots. Higher resolution leads to smoother plots. 
Defaults to <code>100</code>. If <code>surface</code> is <code>TRUE</code>,
this implies <code>10000</code> support points for interaction terms,
so it might be necessary to reduce <code>resolution</code> 
when only few RAM is available.</p></td>
    </tr>
    <tr>
      <th>select_points</th>
      <td><p>Positive number. 
Only relevant if <code>points</code> or <code>rug</code> are set to <code>TRUE</code>: 
Actual data points of numeric variables that 
are too far away from the values specified in <code>conditions</code> 
can be excluded from the plot. Values are scaled into 
the unit interval and then points more than <code>select_points</code> 
from the values in <code>conditions</code> are excluded. 
By default, all points are used.</p></td>
    </tr>
    <tr>
      <th>too_far</th>
      <td><p>Positive number. 
For surface plots only: Grid points that are too 
far away from the actual data points can be excluded from the plot. 
<code>too_far</code> determines what is too far. The grid is scaled into 
the unit square and then grid points more than <code>too_far</code> 
from the predictor variables are excluded. By default, all
grid points are used. Ignored for non-surface plots.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further arguments such as <code>subset</code> or <code>nsamples</code>
passed to <code><a href='predict.brmsfit.html'>predict</a></code> or 
<code><a href='fitted.brmsfit.html'>fitted</a></code>.</p></td>
    </tr>
    <tr>
      <th>ncol</th>
      <td><p>Number of plots to display per column for each effect.
If <code>NULL</code> (default), <code>ncol</code> is computed internally based
on the number of rows of <code>conditions</code>.</p></td>
    </tr>
    <tr>
      <th>points</th>
      <td><p>Logical; indicating whether the original data points
should be added via <code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/geom_jitter'>geom_jitter</a></code>.
Default is <code>FALSE</code>. Note that only those data points will be added
that match the specified conditions defined in <code>conditions</code>.
For categorical predictors, the conditions have to match exactly. 
For numeric predictors, argument <code>select_points</code> is used to
determine, which points do match a condition.</p></td>
    </tr>
    <tr>
      <th>rug</th>
      <td><p>Logical; indicating whether a rug representation of predictor
values should be added via <code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/geom_rug'>geom_rug</a></code>.
Default is <code>FALSE</code>. Depends on <code>select_points</code> in the same
way as <code>points</code> does.</p></td>
    </tr>
    <tr>
      <th>mean</th>
      <td><p>Logical; only relevant for spaghetti plots.
If <code>TRUE</code> (the default), display the mean regression 
line on top of the regression lines for each sample.</p></td>
    </tr>
    <tr>
      <th>jitter_width</th>
      <td><p>Only used if <code>points = TRUE</code>: 
Amount of horizontal jittering of the data points.
Mainly useful for ordinal models. Defaults to <code>0</code> that 
is no jittering.</p></td>
    </tr>
    <tr>
      <th>stype</th>
      <td><p>Indicates how surface plots should be displayed.
Either <code>"contour"</code> or <code>"raster"</code>.</p></td>
    </tr>
    <tr>
      <th>line_args</th>
      <td><p>Only used in plots of continuous predictors:
A named list of arguments passed to 
<code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/geom_smooth'>geom_smooth</a></code>.</p></td>
    </tr>
    <tr>
      <th>cat_args</th>
      <td><p>Only used in plots of categorical predictors:
A named list of arguments passed to 
<code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/geom_point'>geom_point</a></code>.</p></td>
    </tr>
    <tr>
      <th>errorbar_args</th>
      <td><p>Only used in plots of categorical predictors:
A named list of arguments passed to 
<code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/geom_linerange'>geom_errorbar</a></code>.</p></td>
    </tr>
    <tr>
      <th>surface_args</th>
      <td><p>Only used in surface plots:
A named list of arguments passed to 
<code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/geom_contour'>geom_contour</a></code> or
<code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/geom_tile'>geom_raster</a></code>
(depending on argument <code>stype</code>).</p></td>
    </tr>
    <tr>
      <th>spaghetti_args</th>
      <td><p>Only used in spaghetti plots:
A named list of arguments passed to 
<code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/geom_smooth'>geom_smooth</a></code>.</p></td>
    </tr>
    <tr>
      <th>point_args</th>
      <td><p>Only used if <code>points = TRUE</code>: 
A named list of arguments passed to 
<code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/geom_jitter'>geom_jitter</a></code>.</p></td>
    </tr>
    <tr>
      <th>rug_args</th>
      <td><p>Only used if <code>rug = TRUE</code>: 
A named list of arguments passed to 
<code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/geom_rug'>geom_rug</a></code>.</p></td>
    </tr>
    <tr>
      <th>theme</th>
      <td><p>A <code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/theme'>theme</a></code> object 
modifying the appearance of the plots. 
For some basic themes see <code>ggtheme</code>
and <code><a href='https://www.rdocumentation.org/packages/bayesplot/topics/theme_default'>theme_default</a></code>.</p></td>
    </tr>
    <tr>
      <th>ask</th>
      <td><p>logical; indicates if the user is prompted 
before a new page is plotted. 
Only used if <code>plot</code> is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>logical; indicates if plots should be
plotted directly in the active graphic device.
Defaults to <code>TRUE</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>brmsMarginalEffects</code>, which is a named list
  with one data.frame per effect containing all information required 
  to generate marginal effects plots. Among others, these data.frames
  contain some special variables, namely <code>estimate__</code> (predicted values
  of the response), <code>se__</code> (standard error of the predicted response),
  <code>lower__</code> and <code>upper__</code> (lower and upper bounds of the uncertainty
  interval of the response), as well as <code>cond__</code> (used in faceting when 
  <code>conditions</code> contains multiple rows).</p>  
<p>The corresponding <code>plot</code> method returns a named 
  list of <code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></code> objects, which can be further 
  customized using the <span class="pkg">ggplot2</span> package.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>When creating <code>marginal_effects</code> for a particular predictor 
  (or interaction of two predictors), one has to choose the values of all 
  other predictors to condition on. 
  By default, the mean is used for continuous variables
  and the reference category is used for factors, but you may change these
  values via argument <code>conditions</code>. 
  This also has an implication for the <code>points</code> argument: 
  In the created plots, only those points will be shown that correspond 
  to the factor levels actually used in the conditioning, in order not 
  to create the false impression of bad model fit, where it is just 
  due to conditioning on certain factor levels.
  Since we condition on rather than actually marginalizing variables, 
  the name  <code>marginal_effects</code> is possibly not ideally chosen in 
  retrospect.</p>
<p><code>NA</code> values within factors in <code>conditions</code>, 
  are interpreted as if all dummy variables of this factor are 
  zero. This allows, for instance, to make predictions of the grand mean 
  when using sum coding.</p>  
<p>To fully change colors of the created plots, 
  one has to amend both <code>scale_colour</code> and <code>scale_fill</code>.
  See <code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/scale_grey'>scale_colour_grey</a></code> or
  <code><a href='https://www.rdocumentation.org/packages/ggplot2/topics/scale_gradient'>scale_colour_gradient</a></code>
  for more details.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='brm.html'>brm</a></span>(<span class='no'>count</span> ~ <span class='no'>zAge</span> + <span class='no'>zBase</span> * <span class='no'>Trt</span> + (<span class='fl'>1</span> <span class='kw'>|</span> <span class='no'>patient</span>),
           <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>epilepsy</span>, <span class='kw'>family</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/family'>poisson</a></span>())

<span class='co'>## plot all marginal effects</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='fu'>marginal_effects</span>(<span class='no'>fit</span>), <span class='kw'>ask</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'>## change colours to grey scale</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>ggplot2</span>)
<span class='no'>me</span> <span class='kw'>&lt;-</span> <span class='fu'>marginal_effects</span>(<span class='no'>fit</span>, <span class='st'>"zBase:Trt"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>me</span>, <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)<span class='kw'>[[</span><span class='fl'>1</span>]] +
  <span class='fu'><a href='https://www.rdocumentation.org/packages/ggplot2/topics/scale_grey'>scale_color_grey</a></span>() +
  <span class='fu'><a href='https://www.rdocumentation.org/packages/ggplot2/topics/scale_grey'>scale_fill_grey</a></span>()

<span class='co'>## only plot the marginal interaction effect of 'zBase:Trt'</span>
<span class='co'>## for different values for 'zAge'</span>
<span class='no'>conditions</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>zAge</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(-<span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>1</span>))
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='fu'>marginal_effects</span>(<span class='no'>fit</span>, <span class='kw'>effects</span> <span class='kw'>=</span> <span class='st'>"zBase:Trt"</span>,
                      <span class='kw'>conditions</span> <span class='kw'>=</span> <span class='no'>conditions</span>))

<span class='co'>## also incorporate random effects variance over patients</span>
<span class='co'>## also add data points and a rug representation of predictor values</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='fu'>marginal_effects</span>(<span class='no'>fit</span>, <span class='kw'>effects</span> <span class='kw'>=</span> <span class='st'>"zBase:Trt"</span>,
                      <span class='kw'>conditions</span> <span class='kw'>=</span> <span class='no'>conditions</span>, <span class='kw'>re_formula</span> <span class='kw'>=</span> <span class='kw'>NULL</span>),
     <span class='kw'>points</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>rug</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'>## change handling of two-way interactions</span>
<span class='no'>int_conditions</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(
  <span class='kw'>zBase</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/setNames'>setNames</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(-<span class='fl'>2</span>, <span class='fl'>1</span>, <span class='fl'>0</span>), <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"b"</span>, <span class='st'>"c"</span>, <span class='st'>"a"</span>))
)
<span class='fu'>marginal_effects</span>(<span class='no'>fit</span>, <span class='kw'>effects</span> <span class='kw'>=</span> <span class='st'>"Trt:zBase"</span>,
                 <span class='kw'>int_conditions</span> <span class='kw'>=</span> <span class='no'>int_conditions</span>)
<span class='fu'>marginal_effects</span>(<span class='no'>fit</span>, <span class='kw'>effects</span> <span class='kw'>=</span> <span class='st'>"Trt:zBase"</span>,
                 <span class='kw'>int_conditions</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='kw'>zBase</span> <span class='kw'>=</span> <span class='no'>quantile</span>))

<span class='co'>## fit a model to illustrate how to plot 3-way interactions</span>
<span class='no'>fit3way</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='brm.html'>brm</a></span>(<span class='no'>count</span> ~ <span class='no'>zAge</span> * <span class='no'>zBase</span> * <span class='no'>Trt</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>epilepsy</span>)
<span class='no'>conditions</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='make_conditions.html'>make_conditions</a></span>(<span class='no'>fit3way</span>, <span class='st'>"zAge"</span>)
<span class='fu'>marginal_effects</span>(
  <span class='no'>fit3way</span>, <span class='st'>"zBase:Trt"</span>, <span class='kw'>conditions</span> <span class='kw'>=</span> <span class='no'>conditions</span>
)
<span class='co'>## only include points close to the specified values of zAge</span>
<span class='no'>me</span> <span class='kw'>&lt;-</span> <span class='fu'>marginal_effects</span>(
 <span class='no'>fit3way</span>, <span class='st'>"zBase:Trt"</span>, <span class='kw'>conditions</span> <span class='kw'>=</span> <span class='no'>conditions</span>,
 <span class='kw'>select_points</span> <span class='kw'>=</span> <span class='fl'>0.1</span>
)
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>me</span>, <span class='kw'>points</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='co'># }</span><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Paul-Christian Bürkner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

