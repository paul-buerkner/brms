<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare Predictions — prepare_predictions.brmsfit • brms</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare Predictions — prepare_predictions.brmsfit"><meta name="description" content="This method helps in preparing brms models for certain post-processing
tasks most notably various forms of predictions. Unless you are a package
developer, you will rarely need to call prepare_predictions directly."><meta property="og:description" content="This method helps in preparing brms models for certain post-processing
tasks most notably various forms of predictions. Unless you are a package
developer, you will rarely need to call prepare_predictions directly."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">brms</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.22.12</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/brms_customfamilies.html">Define Custom Response Distributions with brms</a></li>
    <li><a class="dropdown-item" href="../articles/brms_distreg.html">Estimating Distributional Models with brms</a></li>
    <li><a class="dropdown-item" href="../articles/brms_families.html">Parameterization of Response Distributions in brms</a></li>
    <li><a class="dropdown-item" href="../articles/brms_missings.html">Handle Missing Values with brms</a></li>
    <li><a class="dropdown-item" href="../articles/brms_monotonic.html">Estimating Monotonic Effects with brms</a></li>
    <li><a class="dropdown-item" href="../articles/brms_multivariate.html">Estimating Multivariate Models with brms</a></li>
    <li><a class="dropdown-item" href="../articles/brms_nonlinear.html">Estimating Non-Linear Models with brms</a></li>
    <li><a class="dropdown-item" href="../articles/brms_phylogenetics.html">Estimating Phylogenetic Multilevel Models with brms</a></li>
    <li><a class="dropdown-item" href="../articles/brms_threading.html">Running brms models with within-chain parallelization</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/paul-buerkner/brms/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Prepare Predictions</h1>
      <small class="dont-index">Source: <a href="https://github.com/paul-buerkner/brms/blob/HEAD/R/prepare_predictions.R" class="external-link"><code>R/prepare_predictions.R</code></a></small>
      <div class="d-none name"><code>prepare_predictions.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This method helps in preparing <span class="pkg">brms</span> models for certain post-processing
tasks most notably various forms of predictions. Unless you are a package
developer, you will rarely need to call <code>prepare_predictions</code> directly.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'brmsfit'</span></span>
<span><span class="fu">prepare_predictions</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  newdata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  re_formula <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  allow_new_levels <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sample_new_levels <span class="op">=</span> <span class="st">"uncertainty"</span>,</span>
<span>  incl_autocor <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  oos <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  resp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ndraws <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  draw_ids <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nsamples <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nug <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  smooths_only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  offset <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  newdata2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  new_objects <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  point_estimate <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ndraws_point_estimate <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">prepare_predictions</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An <span style="R">R</span> object typically of class <code>'brmsfit'</code>.</p></dd>


<dt id="arg-newdata">newdata<a class="anchor" aria-label="anchor" href="#arg-newdata"></a></dt>
<dd><p>An optional data.frame for which to evaluate predictions. If
<code>NULL</code> (default), the original data of the model is used. <code>NA</code>
values within factors (excluding grouping variables) are interpreted as if
all dummy variables of this factor are zero. This allows, for instance, to
make predictions of the grand mean when using sum coding. <code>NA</code> values
within grouping variables are treated as a new level.</p></dd>


<dt id="arg-re-formula">re_formula<a class="anchor" aria-label="anchor" href="#arg-re-formula"></a></dt>
<dd><p>formula containing group-level effects to be considered in
the prediction. If <code>NULL</code> (default), include all group-level effects;
if <code>NA</code> or <code>~0</code>, include no group-level effects.</p></dd>


<dt id="arg-allow-new-levels">allow_new_levels<a class="anchor" aria-label="anchor" href="#arg-allow-new-levels"></a></dt>
<dd><p>A flag indicating if new levels of group-level
effects are allowed (defaults to <code>FALSE</code>). Only relevant if
<code>newdata</code> is provided.</p></dd>


<dt id="arg-sample-new-levels">sample_new_levels<a class="anchor" aria-label="anchor" href="#arg-sample-new-levels"></a></dt>
<dd><p>Indicates how to sample new levels for grouping
factors specified in <code>re_formula</code>. This argument is only relevant if
<code>newdata</code> is provided and <code>allow_new_levels</code> is set to
<code>TRUE</code>. If <code>"uncertainty"</code> (default), each posterior sample for a
new level is drawn from the posterior draws of a randomly chosen existing
level. Each posterior sample for a new level may be drawn from a different
existing level such that the resulting set of new posterior draws
represents the variation across existing levels. If <code>"gaussian"</code>,
sample new levels from the (multivariate) normal distribution implied by the
group-level standard deviations and correlations. This options may be useful
for conducting Bayesian power analysis or predicting new levels in
situations where relatively few levels where observed in the old_data. If
<code>"old_levels"</code>, directly sample new levels from the existing levels,
where a new level is assigned all of the posterior draws of the same
(randomly chosen) existing level.</p></dd>


<dt id="arg-incl-autocor">incl_autocor<a class="anchor" aria-label="anchor" href="#arg-incl-autocor"></a></dt>
<dd><p>A flag indicating if correlation structures originally
specified via <code>autocor</code> should be included in the predictions.
Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-oos">oos<a class="anchor" aria-label="anchor" href="#arg-oos"></a></dt>
<dd><p>Optional indices of observations for which to compute
out-of-sample rather than in-sample predictions. Only required in models
that make use of response values to make predictions, that is, currently
only ARMA models.</p></dd>


<dt id="arg-resp">resp<a class="anchor" aria-label="anchor" href="#arg-resp"></a></dt>
<dd><p>Optional names of response variables. If specified, predictions
are performed only for the specified response variables.</p></dd>


<dt id="arg-ndraws">ndraws<a class="anchor" aria-label="anchor" href="#arg-ndraws"></a></dt>
<dd><p>Positive integer indicating how many posterior draws should
be used. If <code>NULL</code> (the default) all draws are used. Ignored if
<code>draw_ids</code> is not <code>NULL</code>.</p></dd>


<dt id="arg-draw-ids">draw_ids<a class="anchor" aria-label="anchor" href="#arg-draw-ids"></a></dt>
<dd><p>An integer vector specifying the posterior draws to be used.
If <code>NULL</code> (the default), all draws are used.</p></dd>


<dt id="arg-nsamples">nsamples<a class="anchor" aria-label="anchor" href="#arg-nsamples"></a></dt>
<dd><p>Deprecated alias of <code>ndraws</code>.</p></dd>


<dt id="arg-subset">subset<a class="anchor" aria-label="anchor" href="#arg-subset"></a></dt>
<dd><p>Deprecated alias of <code>draw_ids</code>.</p></dd>


<dt id="arg-nug">nug<a class="anchor" aria-label="anchor" href="#arg-nug"></a></dt>
<dd><p>Small positive number for Gaussian process terms only. For
numerical reasons, the covariance matrix of a Gaussian process might not be
positive definite. Adding a very small number to the matrix's diagonal
often solves this problem. If <code>NULL</code> (the default), <code>nug</code> is
chosen internally.</p></dd>


<dt id="arg-smooths-only">smooths_only<a class="anchor" aria-label="anchor" href="#arg-smooths-only"></a></dt>
<dd><p>Logical; If <code>TRUE</code> only predictions related to
smoothing splines (i.e., <code>s</code> or <code>t2</code>) will be computed.
Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-offset">offset<a class="anchor" aria-label="anchor" href="#arg-offset"></a></dt>
<dd><p>Logical; Indicates if offsets should be included in the
predictions. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-newdata-">newdata2<a class="anchor" aria-label="anchor" href="#arg-newdata-"></a></dt>
<dd><p>A named <code>list</code> of objects containing new data, which
cannot be passed via argument <code>newdata</code>. Required for some objects
used in autocorrelation structures, or <code><a href="stanvar.html">stanvars</a></code>.</p></dd>


<dt id="arg-new-objects">new_objects<a class="anchor" aria-label="anchor" href="#arg-new-objects"></a></dt>
<dd><p>Deprecated alias of <code>newdata2</code>.</p></dd>


<dt id="arg-point-estimate">point_estimate<a class="anchor" aria-label="anchor" href="#arg-point-estimate"></a></dt>
<dd><p>Shall the returned object contain only point estimates
of the parameters instead of their posterior draws? Defaults to
<code>NULL</code> in which case no point estimate is computed. Alternatively, may
be set to <code>"mean"</code> or <code>"median"</code>. This argument is primarily
implemented to ensure compatibility with the <code><a href="loo_subsample.brmsfit.html">loo_subsample</a></code>
method.</p></dd>


<dt id="arg-ndraws-point-estimate">ndraws_point_estimate<a class="anchor" aria-label="anchor" href="#arg-ndraws-point-estimate"></a></dt>
<dd><p>Only used if <code>point_estimate</code> is not
<code>NULL</code>. How often shall the point estimate's value be repeated?
Defaults to <code>1</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments passed to <code><a href="validate_newdata.html">validate_newdata</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>'brmsprep'</code> or <code>'mvbrmsprep'</code>,
  depending on whether a univariate or multivariate model is passed.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Paul-Christian Bürkner.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

